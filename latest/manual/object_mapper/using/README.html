


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    Using the mapper | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />

    <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../../../_static/" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_tabs/tabs.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>

    <script src="../../../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>
<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="https://docs.scylladb.com/"><img src="../../../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="https://scylladb.github.io/java-driver/">Scylla Java Driver</a>
                    </li>
                    
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">Scylla Cloud</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">
	
	<div class="large-6 large-push-3 columns">
            <div class="section" id="using-the-mapper">
<h1>Using the mapper<a class="headerlink" href="#using-the-mapper" title="Permalink to this headline">¶</a></h1>
<p>First, create a <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/MappingManager.html">MappingManager</a>. It wraps an existing <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/Session.html">Session</a>
instance:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MappingManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MappingManager</span><span class="o">(</span><span class="n">session</span><span class="o">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MappingManager</span></code> is thread-safe and can be safely shared throughout your
application. You would typically create one instance at startup, right
after your <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">MappingManager</span></code> will initialize the <code class="docutils literal notranslate"><span class="pre">Session</span></code> if not
previously done (this was not the case in previous driver versions; if
this is a problem for you, see <code class="docutils literal notranslate"><span class="pre">MappingManager(session,</span> <span class="pre">protocolVersion)</span></code>).</p>
<div class="section" id="entity-mappers">
<h2>Entity mappers<a class="headerlink" href="#entity-mappers" title="Permalink to this headline">¶</a></h2>
<p>Each entity class (annotated with <code class="docutils literal notranslate"><span class="pre">&#64;Table</span></code>) is managed by a dedicated
<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/Mapper.html">Mapper</a> object. You obtain this object from the <code class="docutils literal notranslate"><span class="pre">MappingManager</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Mapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">mapper</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="na">mapper</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Mapper</span></code> objects are thread-safe. The manager caches them internally, so
calling <code class="docutils literal notranslate"><span class="pre">manager#mapper</span></code> more than once for the same class will return
the previously generated mapper.</p>
<div class="section" id="basic-crud-operations">
<h3>Basic CRUD operations<a class="headerlink" href="#basic-crud-operations" title="Permalink to this headline">¶</a></h3>
<p>To save an object, use <code class="docutils literal notranslate"><span class="pre">Mapper#save</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">UUID</span> <span class="n">userId</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">User</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="s">&quot;John Doe&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">&quot;street&quot;</span><span class="o">,</span> <span class="mo">01000</span><span class="o">));</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
</pre></div>
</div>
<hr class="docutils" />
<p>To retrieve an object, use <code class="docutils literal notranslate"><span class="pre">Mapper#get</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">UUID</span> <span class="n">userId</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">User</span> <span class="n">u</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">userId</span><span class="o">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">get</span></code>’s arguments must match the primary key components (number of
arguments, their types, and order).</p>
<hr class="docutils" />
<p>To delete a row in a table, use <code class="docutils literal notranslate"><span class="pre">Mapper#delete</span></code>. This method support
deleting a row given either its primary keys, or the object to delete:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">UUID</span> <span class="n">userId</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">userId</span><span class="o">);</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
</pre></div>
</div>
<hr class="docutils" />
<p>All these CRUD operations are synchronous, but the <code class="docutils literal notranslate"><span class="pre">Mapper</span></code> provides
their asynchronous equivalents:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">saveFuture</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">saveAsync</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
<span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userFuture</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">getAsync</span><span class="o">(</span><span class="n">userId</span><span class="o">);</span>
<span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">deleteFuture</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">deleteAsync</span><span class="o">(</span><span class="n">userId</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="mapper-options">
<h3>Mapper options<a class="headerlink" href="#mapper-options" title="Permalink to this headline">¶</a></h3>
<p>The basic CRUD operations accept additional options to customize the
underlying query:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ttl</span></code>: add a time-to-live value for the operation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>: add a timestamp value for the operation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">consistencyLevel</span></code>: specify a consistency level.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tracing</span></code>: set tracing flag for the query.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saveNullFields</span></code>: if set to true, fields with value <code class="docutils literal notranslate"><span class="pre">null</span></code> in an
instance that is to be persisted will be explicitly written as <code class="docutils literal notranslate"><span class="pre">null</span></code>
in the query. If set to false, fields with null value won’t be included
in the write query (thus avoiding tombstones), or if using Protocol V4+
unset() will be used for null values.  If not specified, the
default behavior is to persist <code class="docutils literal notranslate"><span class="pre">null</span></code> fields.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ifNotExists</span></code>: if set to true, adds an <code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span></code> clause to the
save operation (use <code class="docutils literal notranslate"><span class="pre">ifNotExists(false)</span></code> if you enabled the option by
default and need to disable it for a specific operation).</p></li>
</ul>
<p>To use options, add them to the mapper call after regular parameters:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">com.datastax.driver.mapping.Mapper.Option.*</span><span class="o">;</span>

<span class="n">mapper</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="s">&quot;helloworld&quot;</span><span class="o">),</span>
            <span class="n">timestamp</span><span class="o">(</span><span class="mi">123456L</span><span class="o">),</span> <span class="n">tracing</span><span class="o">(</span><span class="kc">true</span><span class="o">),</span> <span class="n">ttl</span><span class="o">(</span><span class="mi">42</span><span class="o">));</span>
</pre></div>
</div>
<p>Some options don’t apply to all operations:</p>
<table border="1" style="text-align:center; width:100%;margin-bottom:1em;">
    <tr> <td><b>Option</b></td>         <td><b>save/saveQuery</b></td> <td><b>get/getQuery</b></td> <td><b>delete/deleteQuery</b></td></tr>
    <tr> <td>Ttl</td>                   <td>yes</td>                   <td>no</td>                  <td>no</td> </tr>
    <tr> <td>Timestamp</td>             <td>yes</td>                   <td>no</td>                  <td>yes</td> </tr>
    <tr> <td>ConsistencyLevel</td>      <td>yes</td>                   <td>yes</td>                 <td>yes</td> </tr>
    <tr> <td>Tracing</td>               <td>yes</td>                   <td>yes</td>                 <td>yes</td> </tr>
    <tr> <td>SaveNullFields</td>        <td>yes</td>                   <td>no</td>                  <td>no</td> </tr>
    <tr> <td>IfNotExists</td>           <td>yes</td>                   <td>no</td>                  <td>no</td> </tr>
</table><p>Note that <code class="docutils literal notranslate"><span class="pre">Option.consistencyLevel</span></code> is redundant with the consistency
level defined by <a class="reference external" href="../creating/#creating-a-table-entity">&#64;Table</a>.
If both are defined, the option will take precedence over the
annotation.</p>
<p>Default options can be defined for each type of operation:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="o">.</span><span class="na">setDefaultGetOption</span><span class="o">(</span><span class="n">tracing</span><span class="o">(</span><span class="kc">true</span><span class="o">),</span> <span class="n">consistencyLevel</span><span class="o">(</span><span class="n">QUORUM</span><span class="o">));</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">setDefaultSaveOption</span><span class="o">(</span><span class="n">saveNullFields</span><span class="o">(</span><span class="kc">false</span><span class="o">));</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">setDefaultDeleteOption</span><span class="o">(</span><span class="n">consistencyLevel</span><span class="o">(</span><span class="n">ONE</span><span class="o">));</span>

<span class="c1">// Given the defaults above, this will use tracing(true), consistencyLevel(ONE)</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">uuid</span><span class="o">,</span> <span class="n">consistencyLevel</span><span class="o">(</span><span class="n">ONE</span><span class="o">));</span>
</pre></div>
</div>
<p>To reset default options, use the following methods:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="o">.</span><span class="na">resetDefaultGetOption</span><span class="o">();</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">resetDefaultSaveOption</span><span class="o">();</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">resetDefaultDeleteOption</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="access-to-underlying-statements">
<h3>Access to underlying <code class="docutils literal notranslate"><span class="pre">Statement</span></code>s<a class="headerlink" href="#access-to-underlying-statements" title="Permalink to this headline">¶</a></h3>
<p>Instead of performing an operation directly, it’s possible to ask the
<code class="docutils literal notranslate"><span class="pre">Mapper</span></code> to just return the corresponding <code class="docutils literal notranslate"><span class="pre">Statement</span></code> object. This gives
the client a chance to customize the statement before executing it.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Mapper.saveQuery(entity)</span></code>: returns a statement generated by the
mapper to save <code class="docutils literal notranslate"><span class="pre">entity</span></code> into the database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mapper.getQuery(userId)</span></code>: returns a statement to select a row in the
database, selected on the given <code class="docutils literal notranslate"><span class="pre">userId</span></code>, and matching the mapped
object structure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mapper.deleteQuery(userID)</span></code>: returns a statement to delete a row in the
database given the <code class="docutils literal notranslate"><span class="pre">userId</span></code> provided. This method can also accept a
mapped object instance.</p></li>
</ul>
</div>
<div class="section" id="manual-mapping">
<h3>Manual mapping<a class="headerlink" href="#manual-mapping" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Mapper#map</span></code> provides a way to convert the results of a regular query:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ResultSet</span> <span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;SELECT * FROM user&quot;</span><span class="o">);</span>
<span class="n">Result</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">results</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">User</span> <span class="n">u</span> <span class="o">:</span> <span class="n">users</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;User : &quot;</span> <span class="o">+</span> <span class="n">u</span><span class="o">.</span><span class="na">getUserId</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This method will ignore:</p>
<ul class="simple">
<li><p>extra columns in the <code class="docutils literal notranslate"><span class="pre">ResultSet</span></code> that are not mapped for this entity.</p></li>
<li><p>mapped fields that are not present in the <code class="docutils literal notranslate"><span class="pre">ResultSet</span></code> (setters won’t
be called so the value will be the one after invocation of the class’s
default constructor).</p></li>
</ul>
<p><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/Result.html">Result</a> is similar to <code class="docutils literal notranslate"><span class="pre">ResultSet</span></code> but for a given mapped class.
It provides methods <code class="docutils literal notranslate"><span class="pre">one()</span></code>, <code class="docutils literal notranslate"><span class="pre">all()</span></code>, <code class="docutils literal notranslate"><span class="pre">iterator()</span></code>, <code class="docutils literal notranslate"><span class="pre">getExecutionInfo()</span></code>
and <code class="docutils literal notranslate"><span class="pre">isExhausted()</span></code>. Note that iterating the <code class="docutils literal notranslate"><span class="pre">Result</span></code> will consume the
<code class="docutils literal notranslate"><span class="pre">ResultSet</span></code>, and vice-versa.</p>
</div>
</div>
<div class="section" id="accessors">
<h2>Accessors<a class="headerlink" href="#accessors" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Accessor</span></code>s provide a way to map custom queries not supported by the
default entity mappers.</p>
<p>To create an accessor, define a Java interface and annotate each method
to provide the corresponding CQL query:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Accessor</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserAccessor</span> <span class="o">{</span>
    <span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;SELECT * FROM user&quot;</span><span class="o">)</span>
    <span class="n">Result</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">getAll</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MappingManager</span></code> can then process this interface and automatically generate an
implementation for it:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">UserAccessor</span> <span class="n">userAccessor</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="na">createAccessor</span><span class="o">(</span><span class="n">UserAccessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">Result</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userAccessor</span><span class="o">.</span><span class="na">getAll</span><span class="o">();</span>
</pre></div>
</div>
<p>Like mappers, accessors are cached at the manager level and thus, are
thread-safe/sharable.</p>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>A query can have bind markers, that will be set with the method’s
arguments.</p>
<p>With unnamed markers, the order of the arguments must match the order of
the markers:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;insert into user (id, name) values (?, ?)&quot;</span><span class="o">)</span>
<span class="n">ResultSet</span> <span class="nf">insert</span><span class="o">(</span><span class="n">UUID</span> <span class="n">userId</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>
</pre></div>
</div>
<p>With named markers, use <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/annotations/Param.html">&#64;Param</a> to indicate which parameter
corresponds to which marker:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;insert into user (userId, name) values (:u, :n)&quot;</span><span class="o">)</span>
<span class="n">ResultSet</span> <span class="nf">insert</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;u&quot;</span><span class="o">)</span> <span class="n">UUID</span> <span class="n">userId</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&quot;n&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>
</pre></div>
</div>
<p>If a method argument is a Java enumeration, it must be annotated with
<code class="docutils literal notranslate"><span class="pre">&#64;Enumerated</span></code> to indicate how to convert it to a CQL type (the rules are
the same as in <a class="reference external" href="../creating/#enumerations">mapping definition</a>):</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;insert into user (key, gender) values (?,?)&quot;</span><span class="o">)</span>
<span class="n">ResultSet</span> <span class="nf">addUser</span><span class="o">(</span><span class="kt">int</span> <span class="n">key</span><span class="o">,</span> <span class="nd">@Enumerated</span><span class="o">(</span><span class="n">EnumType</span><span class="o">.</span><span class="na">ORDINAL</span><span class="o">)</span> <span class="n">Enum</span> <span class="n">value</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="return-type">
<h3>Return type<a class="headerlink" href="#return-type" title="Permalink to this headline">¶</a></h3>
<p>The declared return type of each method affects how the query will get
executed:</p>
<table border="1" style="text-align:center; width:100%;margin-bottom:1em;">
    <tr> <td><b>Return type</b></td>            <td><b>Effect</b></td> </tr>
    <tr>
      <td><code>void</code></td>
      <td>Synchronous execution, discards the results of the query.</td>
    </tr>
    <tr>
      <td><code>ResultSet</code></td>
      <td>Synchronous execution, returns unmapped results.</td>
    </tr>
    <tr>
      <td><code>T</code></td>
      <td><code>T</code> must be a mapped class.<br/>Synchronous execution, returns the first row (or <code>null</code> if there are no results).</td>
    </tr>
    <tr>
      <td><code>Result&lt;T&gt;</code></td>
      <td><code>T</code> must be a mapped class.<br/>Synchronous execution, returns a list of mapped objects.</td>
    </tr>
    <tr>
      <td><code>ResultSetFuture</code></td>
      <td>Asynchronous execution, returns unmapped results.</td>
    </tr>
    <tr>
      <td><code>ListenableFuture&lt;T&gt;</code></td>
      <td><code>T</code> must be a mapped class.<br/>Asynchronous execution, returns the first row (or <code>null</code> if there are no results).</td>
    </tr>
    <tr>
      <td><code>ListenableFuture&lt;Result&lt;T&gt;&gt;</code></td>
      <td><code>T</code> must be a mapped class.<br/>Asynchronous execution, returns a list of mapped objects.</td>
    </tr>
    <tr>
      <td><code>Statement</code></td>
      <td>Object mapper doesn't execute query, but returns an instance of <code>BoundStatement</code> that could be executed via <code>Session</code> object. </td>
    </tr>
</table><p>Example:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;SELECT * FROM user&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;&gt;</span> <span class="nf">getAllAsync</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-the-statement">
<h3>Customizing the statement<a class="headerlink" href="#customizing-the-statement" title="Permalink to this headline">¶</a></h3>
<p>It is possible to customize query parameters to include in a <code class="docutils literal notranslate"><span class="pre">Accessor</span></code>
query with the annotation <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/annotations/QueryParameters.html">&#64;QueryParameters</a>. Then, options like
<em>consistency level</em>, <em>fetchsize</em> or <em>tracing</em> are settable:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Query</span><span class="o">(</span><span class="s">&quot;SELECT * FROM ks.users&quot;</span><span class="o">)</span>
<span class="nd">@QueryParameters</span><span class="o">(</span><span class="n">consistency</span><span class="o">=</span><span class="s">&quot;QUORUM&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;&gt;</span> <span class="nf">getAllAsync</span><span class="o">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mapping-configuration">
<h2>Mapping configuration<a class="headerlink" href="#mapping-configuration" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/MappingConfiguration.html">MappingConfiguration</a> lets you configure low-level aspects of the object mapper. It is configured
when initializing the mapping manager:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PropertyMapper</span> <span class="n">propertyMapper</span> <span class="o">=</span> <span class="o">...</span> <span class="o">;</span> <span class="c1">// see examples below</span>
<span class="n">MappingConfiguration</span> <span class="n">configuration</span> <span class="o">=</span> 
        <span class="n">MappingConfiguration</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">withPropertyMapper</span><span class="o">(</span><span class="n">propertyMapper</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">MappingManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MappingManager</span><span class="o">(</span><span class="n">session</span><span class="o">,</span> <span class="n">configuration</span><span class="o">);</span>
</pre></div>
</div>
<p>The main component in the configuration is <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/PropertyMapper.html">PropertyMapper</a>, which controls how annotated classes
will relate to database objects. The best way to plug in specific behavior is to create an instance of
<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/mapping/DefaultPropertyMapper.html">DefaultPropertyMapper</a> and customize it.</p>
<p>For example, the mapper’s default behavior is to try to map all the properties of your Java objects.
You might want to take the opposite approach and only map the ones that are specifically annotated
with <code class="docutils literal notranslate"><span class="pre">&#64;Column</span></code> or <code class="docutils literal notranslate"><span class="pre">&#64;Field</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PropertyMapper</span> <span class="n">propertyMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultPropertyMapper</span><span class="o">()</span>
        <span class="o">.</span><span class="na">setPropertyTransienceStrategy</span><span class="o">(</span><span class="n">PropertyTransienceStrategy</span><span class="o">.</span><span class="na">OPT_IN</span><span class="o">);</span>
</pre></div>
</div>
<p>Another common need is to customize the way Cassandra column names are inferred. Out of the box, Java
property names are simply lowercased, so a <code class="docutils literal notranslate"><span class="pre">userName</span></code> property would be mapped to the <code class="docutils literal notranslate"><span class="pre">username</span></code> column.
To map to <code class="docutils literal notranslate"><span class="pre">user_name</span></code> instead, use the following:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PropertyMapper</span> <span class="n">propertyMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultPropertyMapper</span><span class="o">()</span>
        <span class="o">.</span><span class="na">setNamingStrategy</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultNamingStrategy</span><span class="o">(</span>
                <span class="n">NamingConventions</span><span class="o">.</span><span class="na">LOWER_CAMEL_CASE</span><span class="o">,</span> 
                <span class="n">NamingConventions</span><span class="o">.</span><span class="na">LOWER_SNAKE_CASE</span><span class="o">));</span>
</pre></div>
</div>
<p>There is more to <code class="docutils literal notranslate"><span class="pre">DefaultPropertyMapper</span></code>; see the Javadocs and implementation for details.</p>
</div>
</div>

        </div>

        <div id="sidebar" class="large-3 large-pull-6 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../README.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../address_resolution/README.html">Address resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../async/README.html">Asynchronous programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auth/README.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud/README.html">Connecting to Apollo (Cloud)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/README.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../control_connection/README.html">Control connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../custom_codecs/README.html">Custom Codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../custom_payloads/README.html">Custom Payloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../idempotence/README.html">Query idempotence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../load_balancing/README.html">Load balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/README.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metadata/README.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metrics/README.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../native_protocol/README.html">Native protocol</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">Object Mapper</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../creating/README.html">Definition of mapped classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../custom_codecs/README.html">Using custom codecs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the mapper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../osgi/README.html">OSGi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../paging/README.html">Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pooling/README.html">Connection pooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../query_timestamps/README.html">Query timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reconnection/README.html">Reconnection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../retries/README.html">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shaded_jar/README.html">Using the shaded JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../socket_options/README.html">Socket options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../speculative_execution/README.html">Speculative query execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ssl/README.html">SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../statements/README.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tuples/README.html">Using Tuples with the Java driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../udts/README.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrade_guide/README.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/README.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/README.html">Changelog</a></li>
</ul>

</div>
        </div>

        <div class="large-3 columns">
            
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Using the mapper&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20http://docs.scylladb.com/manual/object_mapper/using/README%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2012, ScyllaDB. All rights reserved.
            </div>
            <div class="footer-last-updated">
                Last updated on 20 October 2020.
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../../../_static/js/vendor/jquery.js"></script>
<script src="../../../_static/expertrec.js"></script>
<script src="../../../_static/js/foundation/foundation.js"></script>
<script src="../../../_static/js/foundation/foundation.topbar.js"></script>
<script src="../../../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>